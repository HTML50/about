<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <link rel="shortcut icon" href="./favicon.png" />
    <style>
    @import url('https://fonts.googleapis.com/css?family=Palanquin');
    * {
        margin: 0;
        padding: 0;
    }

    html,
    body {
        font-family: 'Palanquin', sans-serif;
        height: 100%;
        font-size: 20px;
        text-align: center;
        margin: 0;
        overflow: hidden;
    }

    .top {
        position: fixed;
        top: 0;
        right: 0;
        background: #fff;
        height: 50px;
        width: 100%;
        display: flex;
        color: #fff;
        align-items: center;
        justify-content: space-around;
        transition: width 0.5s,top,0.5s;
    }

    .title { 
      display: block;
      color: #348242;
        font-size: 1.5rem;
        font-weight: 900;}

    .dir {
    color: #a5a5a5;
    font-size: 0.8rem;
        width: 60%;
    }

    #iframe {
        width: 100%;
        height: 100%;
        border: none;
        display: block;
    }

    .icon-width{
            width: 32px;
    height: 32px;
    }

    .icon {
        cursor: pointer;
        opacity: 1;
        transition: opacity 0.3s;
    }

    .icon:hover {
        opacity: 0.8;
    }

    .menu {
        background: url(img/menu.svg) no-repeat 10px;
        width: 55px;
    }

    .list {
        position: fixed;
        top: 50px;
        left: 0;
        width: 0;
        height: 100%;
        background: #fff;
        transition: width 0.3s;
        color: #000;
        overflow: hidden;
        padding: 50px 0;
    }

    </style>
</head>

<body>

    <nav id="nav" class="top">
        <lab class="title icon">IN THE LAB</lab>
        <dir id="dir" class="dir"></dir>
        <menu id="menuBtn" class="icon menu icon-width"></menu>
        <list id='list' class="list">
            <p>
                <h2><a href="?">Index</a></h2>
            </p>
        </list>
    </nav>


    <iframe id="iframe"></iframe>
    <script>
    'strict mode';
    var total = 0,
        direction = 1;

    iframe.src = location.search.slice(1) || 'list.html';


    iframe.onload = function() {
        let title = iframe.contentWindow.document.title;
        document.title = title;
        if(title !== 'IN THE LAB') {
            dir.innerHTML = title;
        }else{
            dir.innerHTML = '';
        }
        iframe.contentWindow.addEventListener('DOMMouseScroll', toggleNav,{passive:true})
        iframe.contentWindow.addEventListener('mousewheel', toggleNav,{passive:true})
    }


    function toggleNav(e) {
        var delta = -e.wheelDelta || e.detail*40,
        showNav = function(){
          nav.style.top = 0;
        },
        hideNav = function(){
          nav.style.top = '-50px'
        }

        if(delta/120 != direction){
          direction = -direction;
          total = 0
        }else{
          total += delta;
        }

        if(total < -600){
          showNav()
        }
        
        if(total > 120){
          hideNav()
        }

    }

    menuBtn.addEventListener('click', function() {
        let w = parseInt(list.style.width);
        if (w === 0 || isNaN(w)) {
            list.style.width = '300px';
            setTimeout(function() {
                window.addEventListener('click', function() {
                    list.style.width = 0;
                    window.removeEventListener('click', arguments.callee)
                })
            }, 0)
        } else {
            list.style.width = 0;
        }
    })
    </script>
</body>

</html>